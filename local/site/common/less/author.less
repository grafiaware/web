@import "../../site-definitions.less";
@import "../../@{sitename}/semantic/src/themes/default/globals/site.variables";
@import (optional) "../../@{sitename}/semantic/src/site/globals/site.variables";

@hodnota0: 0;
@borderWidth: 1px;
@borderStyle: solid;
@borderRadius: 5px;
@fontBold: bold;
@mediumGrey: darken(@lightGrey, 15);
@barvaEditButtony: #FBFBE7;
@barvaEditButtonyTmava: #FFF1D5;
@barvaKos: #F8F3FF;
@barvaButtonSablony: #EDF7FF;


//Body
@buttonDataTooltipFontWeight: @fontBold;

//Menu
@menuLiCutBorder: @borderWidth @borderStyle @mediumGrey;
@menuLiCutItemColor: @mediumGrey;
@menuLiCutItemColorHover: @mediumGrey;
@menuLiCutItemBackgroundColor: transparent;
//Buttony pro menu
@buttonyPasteMenuBorder: @borderWidth @borderStyle @grey;
@buttonyPasteMenuBackgroundColor: lighten(@lightOlive, 15);
@buttonyPasteMenuBorderLeft: 0;
@buttonyMenuBackgroundColor: @barvaEditButtony;
@lastButtonMenuBackgroundColor: @barvaKos;
@lastButtonMenuBackgroundColorHover: @white;
@buttonySvisleMenuPositionTop: -25px;
@buttonySvisleMenuPositionLeft: auto; 
@buttonySvisleMenuPositionRight: @hodnota0;
@buttonySvisleMenuZIndex: 15;
@buttonySvisleMenuKosBackgroundColor: @barvaKos; 
@buttonSvisleMenuKosSecondIconSize: 0.9em;
@buttonSvisleMenuKosSecondIconPositionleft: 7px;
@buttonyPresmerovaniMenuMargin: @hodnota0 @hodnota0 @hodnota0 5px;
@buttonyVodorovneMenuHeight: 28px;
@buttonyVodorovneMenuPositionTop: @hodnota0;
@buttonyVodorovneMenuMargin: @hodnota0 5px @hodnota0 @hodnota0;

//Semafor
@semaforPositionTop: @hodnota0;
@semaforIconMarginBottom: 2px;
//Pro menu
@semaforMenuHeight: 100%;    
@semaforSvisleMenuPositionLeft: -1px;
@semaforPresmerovaniMenuPositionLeft: -12px;
@semaforVodorovneMenuPositionLeft: -6px;
@semaforVodorovneMenuBorder: @borderWidth @borderStyle @primaryColor;
@semaforVodorovneMenuBorderRadius: @borderRadius @hodnota0 @hodnota0 @borderRadius;
@semaforVodorovneMenuBackgroundColor: @white;
@semaforVodorovneMenuIconPaddingLeft: 3px;
//Pro paper
@semaforContentPositionLeft: -21px;
@semaforSectionTrashPositionLeft: -17px;

//Paper
//Buttony pro paper
@buttonyPaperPositionTop: -32px;
@button2PaperPositionRight: -6px; //.editPage
@button2SegmentPaperPositionRight: 18px;
@button2PaperBackgroundColor: @barvaEditButtony;
@button1PaperPositionRight: 26px; //.changePaperTemplate
@button1SegmentPaperPositionRight: 48px;
@button1SegmentPaperHeight: 32px;
@button1PaperBackgroundColor: @barvaButtonSablony;
//Zmena/Vyber sablony
@divSelectWidth: 200px;
@divSelectPositionTop: 31px;
@divSelectPositionLeft: -162px;
@divSelectBackgroundColor: @barvaButtonSablony;
@divSelectBorder: @borderWidth @borderStyle @lightGrey;
@divSelectBorderRadius: @borderRadius @hodnota0 @borderRadius @borderRadius;
@divSelectPadding: 10px;
@divSelectHeaderBackgroundColor: transparent;
@divSelectHeaderBackgroundColorHover: transparent;
@divSelectHeaderCursor: auto;
@compactDropdownPositionLeft: 50%;
@compactDropdownTransform: translateX(-50%) translateY(-20%);
@scrollhintMenuPositionLeft: 6px;
@scrollhintMenuPositionTop: 37px;
@scrollhintMenuItemFontSize: 0.95rem;

//Roh u contentu
@cornerWidth: 2em;
@cornerHeight: 2em;
@cornerSize: 0.3em;
@cornerPositionRigth: -5px;
@cornerColor: lighten(@blue,40);
@cornerIconTransform: translateX(50%);
@sectionTrashCornerPositionRight: 0;
//Buttony pro content
@buttonyContentWidth: 100px;
@buttonyContentPositionRight: 6px;
@buttonyContentPositionTop: 6px;
@buttonyContentBackgroundColor: @barvaEditButtony;
@lastButtonContentBackgroundColor: @barvaKos;
//Kalendář
@buttonyKalendarPositionTop: -32px;
@buttonyKalendarPositionRight: @hodnota0;
@buttonyKalendarBackgroundColor: @barvaEditButtonyTmava;
@divKalendarPositionTop: @hodnota0;
@divKalendarPositionRight: -0.15em;
@divKalendarFontSize: 2.8em;
@divKalendarPadding: 10px;
@divKalendarColor: @black;
@divKalendarBackgroundColor: @barvaEditButtonyTmava;
@divKalendarBorder: @borderWidth @borderStyle @lightGrey;
@divKalendarBorderRadius: @borderRadius;
@divKalendarParagraphTextAlign: left;
@divKalendarParagraphMarginBottom: 5px;
@divKalendarCursor: auto;
@divKalendarZIndex: 1;

//Prostředí pro Tiny
@mceBodyOutline: @borderWidth dotted @lightGrey;
@mceBodyTemplateOutline: @borderWidth dashed darken(@barvaButtonSablony, 15);
@mceBodyLinkSelected: true;
@mceLinkSelectedColor: @white;
@mceLinkNotSelectedColor: #b4d7ff; //Tiny modrá pro odkaz
@mceBodyMargin: @hodnota0 -5px; //.mce-content-body
@mceBodyPadding: 5px;
@mceFocusMargin: @hodnota0 -5px; //.mce-edit-focus
@mceFocusPadding: 5px;
@mceBorderDanceColor: @green;
@mceTemplateSelectBorderDanceColor: @teal;


 
//import změněných proměnných stylu šablony (specifických pro projekt)
@import (optional) "../../@{sitename}/@{siteStylesFolder}/variables-author.less";

.border-dance(@color){
    background: linear-gradient(90deg, @color 50%, transparent 50%),
                linear-gradient(90deg, @color 50%, transparent 50%),
                linear-gradient(0deg, @color 50%, transparent 50%),
                linear-gradient(0deg, @color 50%, transparent 50%);
    background-size: 12px 3px, 12px 3px, 3px 12px, 3px 12px;
    background-repeat: repeat-x, repeat-x, repeat-y, repeat-y;
}
.mceBodyLinkSelectedColor(@linkSelected, @colorNotFocus, @colorFocus) when (@linkSelected = true){
    &:not(mce-edit-focus) a[data-mce-selected]{
        background-color: @colorNotFocus !important;
    }
    &.mce-edit-focus a[data-mce-selected]{
        background-color: @colorFocus !important; //Tiny modrá pro odkaz
    }
}

body{ 
    /*popisky buttonů budou tučně - popisky jsou v atributu data-tooltip*/
    .buttons [data-tooltip]::after{
        font-weight: @buttonDataTooltipFontWeight;
    }

    /***MENU***/
    /*pouzivane tridy u polozky menu (li):
        .leaf - posledni polozka menu
        .onpath - "na ceste"; pouziva se u kazde polozky, na kterou se klikne - potreba pro stylovani podmenu
        .presented - pouziva se vzdy u posledni polozky, na kterou se klikne
        .item je pouzita u (li) nebo (a) podle sady stylu semantic UI (semanticka trida)
        .cut - třída se přidá, pokud se klikne na tlačítko vybrat k přesunutí*/
    /*ZOBRAZENÍ SADY BUTTONU PRO OPERACE S POLOZKOU MENU*/
        /*používané třídy u sady buttonů 
            .buttons - semantická třída, obalovací div pro všechna tlačítka
            .button - semantická třída, jeden button ze sady
            .paste - přidá se k třídě .button, když se přesouvá položka menu (button vybrat k přesunutí)*/
    /*PRO VSECHNA MENU*/
    .menu, .hlavni-menu{
        /*styl pro položku menu, která je vybrána k přesunutí*/
        li.cut{
            border: @menuLiCutBorder !important ;
            a.item, > p.item span{
                color: @menuLiCutItemColor !important;
                &:hover{
                    color: @menuLiCutItemColorHover;
                    background-color: @menuLiCutItemBackgroundColor !important;
                }
            }
        }
        /*buttony se zobrazí jen u vybrané položky menu*/
        li:not(.presented):not(.cut) .buttons{
            display: none;
        }
        li.presented > .buttons{
            display: flex !important;
            background-color: @buttonyMenuBackgroundColor ;
            > .button:last-child{
                background-color: @lastButtonMenuBackgroundColor;
                &:hover{
                    background-color: @lastButtonMenuBackgroundColorHover;
                }
            }
        }
        li.cut > .buttons{
            display: flex;
            background-color: @buttonyMenuBackgroundColor;
        }
        /*vložit vybranou položku jako sourozence, potomka - zvýraznění buttonů*/
        .paste{
            border: @buttonyPasteMenuBorder !important;
            background-color: @buttonyPasteMenuBackgroundColor !important;
            &:nth-of-type(3){
                border-left: @buttonyPasteMenuBorderLeft !important;
            }
        }
        /*nový název se ukládá pomocí entru - zároveň se vloží html <br>, které tam není žádoucí*/
        br{
            display: none;
        }
    }
    /*SVISLE MENU*/
    /*svislé menu má pevnou výšku, protože jsou v editačním režimu vidět i neaktivní stránky
    (a je jich tam hodně). Aby obsah nepřetékal, přidána svislá rolovací lišta*/
    .svisle-menu{
        /*pozice buttonů u svislého menu*/
        .buttons{
            position: absolute;
            left: @buttonySvisleMenuPositionLeft;
            right: @buttonySvisleMenuPositionRight;
            top: @buttonySvisleMenuPositionTop;
            z-index: @buttonySvisleMenuZIndex;
        }
        /*SVISLÉ MENU KOŠ*/
        &.kos{
            .buttons{
                background-color: @buttonySvisleMenuKosBackgroundColor;
                /*button smazat trvale má iconu složenou ze dvou (koš a vykřičník - ten je zvýrazněný)*/
                .exclamation.icon{
                    font-size: @buttonSvisleMenuKosSecondIconSize;
                    left: @buttonSvisleMenuKosSecondIconPositionleft;
                }
            }
        }
    }
    /*PRESMEROVANI MENU*/
    .presmerovani-menu{
        /*pozice buttonů u presmerovani menu*/
        .buttons{
            margin: @buttonyPresmerovaniMenuMargin;
        }
    }
    .presmerovani-menu, .vodorovne-menu{
        /*buttony velké jako položka menu*/
        /*není to u .buttons protože to je jen obal - nastaví výšku celé sady, ale buttony nezmenší*/
        .button{
            height: @buttonyVodorovneMenuHeight;
        }
    }
    /*VODOROVNE MENU*/
    .vodorovne-menu{
        /*pozice buttonů u vodorovného menu*/
        .buttons{
            position: relative;
            margin: @buttonyVodorovneMenuMargin;
            top: @buttonyVodorovneMenuPositionTop;
        }
    }


    /***SEMAFOR***/
    /*ukazatelé stavu stránky u contentů a u položky menu*/
    /*SPOLEČNÁ ČÁST*/
    .semafor{
        display: flex;
        flex-direction: column;
        position: absolute;
        top: @semaforPositionTop;
        left: @semaforContentPositionLeft;
        i.icon{ //když bude více icon, nebudou nalepené u sebe
            margin-bottom: @semaforIconMarginBottom;
        }
    }
    /*U POLOŽKY MENU*/  
    nav .semafor{
        justify-content: center;
        height: @semaforMenuHeight;
        left: @semaforSvisleMenuPositionLeft;
    }
    nav li{
        padding-left: 15px !important;
    }
    /*PRESMEROVANI MENU*/
    .presmerovani-menu .menu.edit{ //větší váha selektorů kvůli speciálnímu zobrazení pro přesměrování menu
       .semafor{
           left: @semaforPresmerovaniMenuPositionLeft;
       }
    }
    /*VODOROVNÉ MENU*/
    .vodorovne-menu .menu.edit{ //větší váha selektorů kvůli speciálnímu zobrazení pro vodorovné menu
        .semafor{
            left: @semaforVodorovneMenuPositionLeft;
            background-color: @semaforVodorovneMenuBackgroundColor;
            border: @semaforVodorovneMenuBorder;
            border-radius: @semaforVodorovneMenuBorderRadius;
            i{
                padding-left: @semaforVodorovneMenuIconPaddingLeft;
            }
        }
        //ke smazání, až bude .semafor i v <p>
        .presented .semafor{
            top: 4px;
            height: 28px;
            margin-left: 5px;
        }
    }
    /*SVISLÉ MENU*/ //ke smazání, až bude .semafor i v <p>
    .svisle-menu .menu.edit{
        li {
            > .semafor{
                top: 10px;
                left: 1px; 
                height: auto;
            }
        }
    }
    /*PAPER*/
    /*SECTION*/
    section{
        /*vytvoření nového omezujícího bloku - pro zanořené position: absolute*/
        position: relative;
    }
    /*SMAZANÝ CONTENT*/
    section.trash{
        .semafor{
            left: @semaforSectionTrashPositionLeft;
        }
        .blue.corner.label{
            right: @sectionTrashCornerPositionRight;
        }
    }
    /*BUTTONY PRO PAPER*/
    /*používané třídy pro buttony k paperu
        .editPage - všechny buttony týkající se operace s vnitřkem paperu (přidat obsah, seřadit obsahy)
        .changePaperTemplate - div vypadající jako button na výměnu šablony stránky - funguje jako dropdown */
    .editPage, .dropdown.changePaperTemplate{
        position: absolute;
        top: @buttonyPaperPositionTop;
    }
    .editPage{
        right: @button2PaperPositionRight;
        background-color: @button2PaperBackgroundColor;
    }
    .segment{
        .editPage{
            right: @button2SegmentPaperPositionRight;
        }
        .dropdown.changePaperTemplate{
            right: @button1SegmentPaperPositionRight;
            height: @button1SegmentPaperHeight;
        }
    }
    .dropdown.changePaperTemplate{
        right: @button1PaperPositionRight;
        background-color: @button1PaperBackgroundColor !important;
    }
    /*VYBER SABLONY*/
    /*používané třídy pro div se selectem
        .changePaperTemplate - div vypadající jako button na výměnu šablony stránky - funguje jako dropdown
        .selectTemplate - obalovací div pro selection dropdown (select)*/
    .dropdown.changePaperTemplate{
        &[data-tooltip]::after{
            font-weight: @buttonDataTooltipFontWeight;
        }
        /*po najetí na vnořený div .selectTemplate se v edit.js přidá třída .nodatatooltip, aby nebyl vidět popisek divu .changePaperTemplate*/
        &.nodatatooltip[data-tooltip]::after,
        &.nodatatooltip[data-tooltip]::before{
            display: none;
        }
        .menu.selectTemplate{
            width: @divSelectWidth;
            top: @divSelectPositionTop;
            left: @divSelectPositionLeft;
            background-color: @divSelectBackgroundColor;
            border: @divSelectBorder;
            border-radius: @divSelectBorderRadius;
            /* u .header zároveň třída .item pro funkčnost dropdownu*/
            .header{
                cursor: @divSelectHeaderCursor;
                background-color: @divSelectHeaderBackgroundColor;
                &:hover{
                    background-color: @divSelectHeaderBackgroundColorHover;
                }
            }
            /*dropdown, který vypadá jako select*/
            .selection.dropdown{
                left: @compactDropdownPositionLeft;
                transform: @compactDropdownTransform;
                /*rozbalená nabídka*/
                .scrollhint.menu{
                    left: @scrollhintMenuPositionLeft;
                    top: @scrollhintMenuPositionTop;
                    /*jednotlivé položky*/
                    .item{
                        font-size: @scrollhintMenuItemFontSize;
                    }
                }
            }
        }
    }

    /*ROH U CONTENTU*/
    .blue.corner.label{
        width: @cornerWidth;
        height: @cornerHeight;
        font-size: @cornerSize;
        right: @cornerPositionRigth;
        border-color: @cornerColor !important;
        .icon:not(.editDate){
            /*výchozí vlastnost polohy CSS - semantic má nastaveno position: absolute, což je zde nežádoucí*/
            position: initial;
        }
        /*icony, které jsou složené ze dvou, budou vycentrované jako ostatní*/
        .icons .icon{
            transform: @cornerIconTransform;
        }
    }
    /*BUTTONY PRO CONTENT*/
    /*používané třídy pro buttony ke contentu
        .contentButtons - obalovací div pro všechny .editContent
        .editContent - třída u .buttons (aktivní/neaktivní, přidat obsah,...), slouží k nastavení contentu; označuje 1 řádků butonů*/
    .contentButtons{
        display: none; /*po najetí na "modrý roh" se v edit.js mění display na flex*/
        flex-direction: column;
        position: absolute;
        width: @buttonyContentWidth;
        right: @buttonyContentPositionRight;
        top: @buttonyContentPositionTop;
        &.trash .editContent{
            background-color: @lastButtonContentBackgroundColor;
        }
        .editContent{
            background-color: @buttonyContentBackgroundColor;
            &:last-child{
                background-color: @lastButtonContentBackgroundColor;
            }
        }
    }
    /*KALENDÁŘ*/
    /*slouží k nastavení kalendáře contentu*/
    /*používané třídy pro buttony ke kalendáři
        .editDate - třída divu pro výběr data i .buttons (trvale, uložit,...)*/
    /*BUTTONY*/
    .corner.label .buttons.editDate{
        position: absolute;
        right: @buttonyKalendarPositionRight;
        top: @buttonyKalendarPositionTop;
        background-color: @buttonyKalendarBackgroundColor;
    }
    .editDate, .buttons.editDate{
        display: none; /*po kliknutí na iconu kalendáře se v edit.js mění display na flex*/
    }
    /*VÝBĚR DATA V KALENDÁŘI*/
    .edit_kalendar{
        position: absolute;
        cursor: @divKalendarCursor;
        top: @divKalendarPositionTop;
        right: @divKalendarPositionRight;
        font-size: @divKalendarFontSize;
        padding: @divKalendarPadding;
        color: @divKalendarColor;
        background-color: @divKalendarBackgroundColor;
        border: @divKalendarBorder;
        border-radius: @divKalendarBorderRadius;
        z-index: @divKalendarZIndex;
        /*popisky inputů*/
        p{
            text-align: @divKalendarParagraphTextAlign;
            margin-bottom: @divKalendarParagraphMarginBottom;
        }
        /*obalující div inputu, semantická třída*/
        .calendar{
            margin-bottom: 10px;
        }
    }


    /***PROSTŘEDÍ TINY***/
    /*používané třídy pro práci s editovatelnou částí webu, třídy, které přidává Tiny
        .mce-content-body - tuto třídu dá Tiny ke všem tagům, které mají být editovatelné
        .mce-edit-focus - tato třída se přidá jen k tagu, který právě edituji*/
    /*výběr šablony paperu .paper_template_select má jiné ohraničení*/
    .mce-content-body{
        padding: @mceBodyPadding;
        margin: @mceBodyMargin;
        /*označení pro tagy, které jsou editovatelné, ale ještě nebyly vybrány pro editaci*/
        /*rozdílné ohraničení pro editaci a pro výběr šablony*/
        &:not(.mce-edit-focus){
            &:not(.paper_template_select){
                outline: @mceBodyOutline;
            }
            &.paper_template_select{
                outline: @mceBodyTemplateOutline;
            }
        }
        /*Při editaci odkazu ho Tiny obarvuje modře - podbarvení zůstává i při opuštění editovatelného tagu*/
        /*změna podbarvení při opuštění editovatelného tagu na bílou - potřeba změnit, pokud bude nastavena editačním tagům background-color*/
        .mceBodyLinkSelectedColor(@mceBodyLinkSelected, @mceLinkSelectedColor, @mceLinkNotSelectedColor);
        /*při editaci buttonů lze vybírat text myší, semantic má nastaveno user-select: none*/
        &.mce-edit-focus{
            .button{
                user-select: text;
                    -webkit-user-select: text;
                    -moz-user-select: text;
                    -ms-user-select: text;
                cursor: text;
            }
        }
    }
    .mce-edit-focus{
        /*.border-dance - obíhající border kolem editačního tagu, v edit.js ještě nastavena animation-duration podle výšky a šířky tagu*/
        padding: @mceFocusPadding;
        margin: @mceFocusMargin;
        height: max-content;
        animation: border-dance 40s infinite linear;
        /*označení pro tagy, které jsou editovatelné a byly vybrány pro editaci*/
        /*rozdílné ohraničení pro editaci a pro výběr šablony*/
        &:not(.paper_template_select){
            .border-dance(@mceBorderDanceColor);
        }
        &.paper_template_select{
            .border-dance(@mceTemplateSelectBorderDanceColor);
        }
    }
    
    //import pravidel specifických pro projekt
    @import (optional) "../../@{sitename}/@{siteStylesFolder}/rules-author.less";
    
}
@keyframes border-dance {
    0% {
        background-position: 0 0, 100% 100%, 0 100%, 100% 0;
    }
    100% {
        background-position: 100% 0, 0 100%, 0 0, 100% 100%;
    }
}

